<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Guía OOP en PHP — HTML</title>
<style>
:root {
  --bg: #0b1020;
  --panel: #111834;
  --text: #e6e9ef;
  --muted: #a0acc0;
  --accent: #6ea8fe;
  --border: #223;
  --code-bg: #0f1a33;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
}
.wrapper {
  display: grid;
  grid-template-columns: 300px 1fr;
  min-height: 100vh;
}
nav {
  background: var(--panel);
  padding: 24px 18px;
  border-right: 1px solid var(--border);
  position: sticky;
  top: 0;
  height: 100vh;
  overflow: auto;
}
nav h2 {
  margin-top: 0;
  font-size: 18px;
  color: var(--muted);
  letter-spacing: .2px;
}
nav ul { list-style: none; padding-left: 6px; }
nav li { margin: 6px 0; }
nav a {
  color: var(--text);
  text-decoration: none;
  opacity: .85;
}
nav a:hover { color: var(--accent); opacity: 1; }
main {
  padding: 32px;
}
h1,h2,h3,h4 { color: #ffffff; }
h1 { font-size: 34px; margin-top: 0; }
h2 { font-size: 26px; margin-top: 40px; }
h3 { font-size: 20px; margin-top: 28px; }
p, li, td, th { font-size: 16px; }
code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
pre {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 14px 18px;
  overflow-x: auto;
  position: relative;
}
pre code { color: #e7f0ff; white-space: pre; }
.copy-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 6px 10px;
  border-radius: 8px;
  background: #1a2347;
  color: #cfe1ff;
  border: 1px solid #2a3567;
  cursor: pointer;
  font-size: 12px;
}
.copy-btn.copied { background: #1e7a36; border-color: #2aa34a; color: #eaffef; }
table { border-collapse: collapse; border: 1px solid var(--border); width: 100%; }
th, td { padding: 10px 12px; border: 1px solid var(--border); }
blockquote {
  margin: 0;
  padding: 12px 16px;
  border-left: 4px solid var(--accent);
  background: rgba(110,168,254,0.08);
  color: var(--text);
}
hr { border: none; border-top: 1px solid var(--border); margin: 32px 0; }
a { color: var(--accent); }
.toc-title { margin: 8px 0 12px; font-weight: 600; }
.small { color: var(--muted); font-size: 13px; }
</style>
</head>
<body>
<div class="wrapper">
  <nav>
    <h2 class="toc-title">📚 Contenido</h2>
    <ul></ul>
    <p class="small">Generado automáticamente a partir de Markdown.</p>
  </nav>
  <main>
    <h1>🧭 Guía Didáctica Completa de Programación Orientada a Objetos (OOP) en PHP</h1><p>> Manual pedagógico y ampliado que cubre **todos** los apartados solicitados, con explicaciones paso a paso, analogías, buenas prácticas, errores comunes, ejercicios guiados y mini‑proyectos. Todo el código está en bloques para que puedas **copiar/pegar** fácilmente.</p><p>---</p><h2>🧩 Índice General</h2>
1. [Introducción a la Programación Orientada a Objetos](#1-introducción-a-la-programación-orientada-a-objetos)  
2. [Clases y Objetos](#2-clases-y-objetos)  
3. [Constructores (`__construct`)](#3-constructores-__construct)  
4. [Destructores (`__destruct`)](#4-destructores-__destruct)  
5. [Modificadores de Acceso](#5-modificadores-de-acceso)  
6. [Herencia y `final`](#6-herencia-y-final)  
7. [Constantes de Clase](#7-constantes-de-clase)  
8. [Clases y Métodos Abstractos](#8-clases-y-métodos-abstractos)  
9. [Interfaces](#9-interfaces)  
10. [Traits](#10-traits)  
11. [Métodos Estáticos](#11-métodos-estáticos)  
12. [Propiedades Estáticas](#12-propiedades-estáticas)  
13. [Namespaces](#13-namespaces)  
14. [Iterables e Iteradores](#14-iterables-e-iteradores)  
15. [Principios SOLID](#15-principios-solid)  
16. [Errores Comunes en OOP PHP](#16-errores-comunes-en-oop-php)  
17. [Resumen Visual + Ejercicios Finales](#17-resumen-visual--ejercicios-finales)  
18. [Mini‑proyecto guiado: Gestor de Tareas OOP](#18-mini-proyecto-guiado-gestor-de-tareas-oop)<p>---</p><h2>🧱 1. Introducción a la Programación Orientada a Objetos</h2><p>La **POO** organiza el software en torno a **clases** (plantillas) y **objetos** (instancias), uniendo **datos** (propiedades) y **comportamientos** (métodos) en unidades coherentes.</p><h3>🎯 Ventajas clave</h3>
- **Encapsulación**: ocultar detalles internos y exponer una API clara.  
- **Reutilización**: herencia, composición y traits para evitar duplicación.  
- **Mantenibilidad**: cambios localizados y pruebas más sencillas.  
- **Modelado realista**: el dominio se refleja en el código.<h3>🧠 Conceptos esenciales</h3>
| Concepto | Descripción | Ejemplo |
|---|---|---|
| Clase | Molde que define estructura y conducta | `class Persona { ... }` |
| Objeto | Instancia concreta de una clase | `$p = new Persona();` |
| Propiedad | Dato del objeto | `$p->nombre` |
| Método | Acción del objeto | `$p->saludar()` |
| `$this` | Referencia al objeto actual | `$this->propiedad` |<h3>🧩 Ejemplo de introducción</h3>
<pre><code class='php'><?php
class Persona {
    public string $nombre;
    public function saludar(): void {
        echo "Hola, soy {$this->nombre}";
    }
}
$ana = new Persona();
$ana->nombre = "Ana";
$ana->saludar();</code></pre><p>---</p><h2>🚗 2. Clases y Objetos</h2><h3>🔹 Definición y sintaxis básica</h3>
<pre><code class='php'><?php
class Coche {
    public string $marca;
    public string $modelo;<p>public function arrancar(): void {
        echo "El {$this->marca} {$this->modelo} está arrancando...";
    }
}
$auto = new Coche();
$auto->marca = "Toyota";
$auto->modelo = "Corolla";
$auto->arrancar();</code></pre></p><h3>🔧 Reglas prácticas</h3>
- Nombra las clases en **PascalCase** y los métodos/propiedades en **camelCase**.  
- Una clase debe tener **una responsabilidad principal** (cohesión).<h3>🧪 Ejercicio</h3>
Crea `Libro` con `$titulo`, `$autor` y `descripcion()` que devuelva “*«Título» de Autor*”.<p>---</p><h2>⚙️ 3. Constructores (`__construct`)</h2><p>El constructor se ejecuta **al crear** un objeto, ideal para **inicializar** estado o validar.</p><pre><code class='php'><?php
class Usuario {
    public function __construct(
        public string $nombre,
        public string $email
    ) {
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            throw new InvalidArgumentException("Email inválido");
        }
    }
}
$u = new Usuario("Laura", "laura@mail.com");</code></pre><h3>🔁 Herencia y `parent::__construct()`</h3>
<pre><code class='php'><?php
class Animal {
    public function __construct(public string $nombre) {}
}
class Perro extends Animal {
    public function __construct(string $nombre, public string $raza) {
        parent::__construct($nombre);
    }
}</code></pre><h3>⚠️ Errores frecuentes</h3>
- Olvidar `__` en `__construct`.  
- No usar `$this->` al asignar propiedades.<h3>🧪 Ejercicio</h3>
Implementa `Conexion` con host, db y un flag `conectado` que se marque a `true` en el constructor.<p>---</p><h2>🧹 4. Destructores (`__destruct`)</h2><p>Se ejecutan cuando el objeto **se destruye** o termina el script. Útiles para **liberar recursos**.</p><pre><code class='php'><?php
class Archivo {
    private $fh;
    public function __construct(string $ruta) { $this->fh = fopen($ruta, 'w'); }
    public function escribir(string $txt): void { fwrite($this->fh, $txt); }
    public function __destruct() { if ($this->fh) fclose($this->fh); }
}</code></pre><h3>💡 Consejos</h3>
- Limítalo a tareas de limpieza (cerrar conexiones/archivos).  
- Evita lógica de negocio en `__destruct()`.<h3>🧪 Ejercicio</h3>
Crea `LoggerArchivo` que abra un archivo en `__construct` y lo cierre en `__destruct`.<p>---</p><h2>🔐 5. Modificadores de Acceso</h2><p>Controlan la **visibilidad** de miembros.</p><p>| Modificador | Acceso |
|---|---|
| `public` | En cualquier lugar |
| `protected` | Clase actual y subclases |
| `private` | Solo la clase actual |</p><pre><code class='php'><?php
class Cuenta {
    private float $saldo = 0;
    public function depositar(float $m): void { if ($m > 0) $this->saldo += $m; }
    public function verSaldo(): float { return $this->saldo; }
}</code></pre><h3>🧠 Encapsulación</h3>
Usa getters/setters solo cuando **aporten valor** (validación, invariantes).<h3>🧪 Ejercicio</h3>
`Producto` con `$precio` privado y `setPrecio()` que rechace valores negativos.<p>---</p><h2>🧬 6. Herencia y `final`</h2><p>La herencia permite **reutilizar** y **especializar**.</p><pre><code class='php'><?php
class Animal { public function sonido(): string { return "Sonido"; } }
class Gato extends Animal { public function sonido(): string { return "Miau"; } }
$g = new Gato(); echo $g->sonido();</code></pre><h3>🔒 `final`</h3>
<pre><code class='php'><?php
final class Sistema {}
class Base {
    final public function noSobrescribir(): void {}
}</code></pre><h3>🧭 Composición vs Herencia</h3>
Prefiere **composición** si la relación no es “es-un(a)”.<h3>🧪 Ejercicio</h3>
`Vehiculo` con `arrancar()`. `Moto` sobrescribe el comportamiento.<p>---</p><h2>⚙️ 7. Constantes de Clase</h2><p>Valores **inmutables** por clase.</p><pre><code class='php'><?php
class Config {
    public const VERSION = "2.1.0";
    public const AUTOR = "Equipo PHP";
}
echo Config::VERSION;</code></pre><h3>🧪 Ejercicio</h3>
`Matematica::PI` y método `areaCirculo(float $r): float`.<p>---</p><h2>🧩 8. Clases y Métodos Abstractos</h2><p>Plantillas que **no se instancian** y fuerzan implementación en hijas.</p><pre><code class='php'><?php
abstract class Figura {
    abstract public function area(): float;
    public function unidad(): string { return "cm²"; }
}
class Rectangulo extends Figura {
    public function __construct(private float $w, private float $h) {}
    public function area(): float { return $this->w * $this->h; }
}</code></pre><h3>🧪 Ejercicio</h3>
`Figura` + `Circulo` y `Triangulo` implementando `area()`.<p>---</p><h2>🧠 9. Interfaces</h2><p>Definen **contratos** (sin implementación) que varias clases pueden cumplir.</p><pre><code class='php'><?php
interface Exportable { public function exportar(): string; }
class Usuario implements Exportable {
    public function __construct(private string $nombre) {}
    public function exportar(): string { return json_encode(['nombre'=>$this->nombre]); }
}
function enviar(Exportable $x): void { echo $x->exportar(); }
enviar(new Usuario("Ana"));</code></pre><h3>Diferencias con abstractas</h3>
- Interfaces: **solo** método(s) sin cuerpo; múltiples `implements`.  
- Abstractas: pueden tener propiedades y métodos con cuerpo; **una** clase base.<h3>🧪 Ejercicio</h3>
`Pago` con `procesar()`. `PagoPaypal` y `PagoTarjeta` lo implementan.<p>---</p><h2>🔀 10. Traits</h2><p>Reutilizan **métodos** sin herencia múltiple.</p><pre><code class='php'><?php
trait Logger { public function log(string $m): void { echo "[LOG] $m\n"; } }
trait Notificador { public function notificar(string $m): void { echo "📢 $m\n"; } }
class Servicio {
    use Logger, Notificador;
}
$s = new Servicio();
$s->log("Iniciado"); $s->notificar("Listo");</code></pre><h3>Conflictos y alias</h3>
<pre><code class='php'><?php
trait A { public function hola(){ echo "A"; } }
trait B { public function hola(){ echo "B"; } }
class X {
  use A, B { A::hola insteadof B; B::hola as holaB; }
}</code></pre><h3>🧪 Ejercicio</h3>
`Autenticable` como trait con `login()` y `logout()` usado en 2 clases.<p>---</p><h2>🧮 11. Métodos Estáticos</h2><p>Pertenecen a la **clase** (no al objeto).</p><pre><code class='php'><?php
class Calculadora {
    public static function sumar(int $a,int $b): int { return $a+$b; }
}
echo Calculadora::sumar(3,5);</code></pre><p>- Usa `self::` dentro de la clase; `static::` para late static binding.
- No acceden a `$this`.</p><h3>🧪 Ejercicio</h3>
`Conversor::kmAMillas(float $km): float` y `::millasAKm(float $mi): float`.<p>---</p><h2>🧭 12. Propiedades Estáticas</h2><p>Compartidas por **todas** las instancias.</p><pre><code class='php'><?php
class Contador {
    public static int $total = 0;
    public function __construct() { self::$total++; }
}
new Contador(); new Contador();
echo Contador::$total; // 2</code></pre><h3>🧪 Ejercicio</h3>
`Sesion::$usuariosConectados` y método `conectar()` que la incremente.<p>---</p><h2>🗂️ 13. Namespaces</h2><p>Evitan **colisiones** de nombres y organizan el código.</p><pre><code class='php'><?php
// src/Model/Usuario.php
namespace App\Model;
class Usuario { public function info(): string { return "Soy Usuario del Modelo"; } }</code></pre>
<pre><code class='php'><?php
// index.php
use App\Model\Usuario as UsuarioModelo;
$u = new UsuarioModelo();
echo $u->info();</code></pre><h3>Reglas</h3>
- Declarar `namespace` al inicio del archivo.  
- Importar con `use` y alias con `as` cuando convenga.<h3>🧪 Ejercicio</h3>
Dos `Usuario` en `App\Model` y `App\Controller` y úsalos con alias.<p>---</p><h2>🔁 14. Iterables e Iteradores</h2><p>`iterable` = **array** u objeto que implementa `Iterator`.</p><pre><code class='php'><?php
function mostrar(iterable $xs): void { foreach($xs as $x) echo "$x "; }
mostrar([1,2,3]);</code></pre><h3>Implementar `Iterator`</h3>
<pre><code class='php'><?php
class Serie implements Iterator {
    private array $data; private int $i = 0;
    public function __construct(array $data){ $this->data = array_values($data); }
    public function current(): mixed { return $this->data[$this->i]; }
    public function key(): mixed { return $this->i; }
    public function next(): void { $this->i++; }
    public function rewind(): void { $this->i = 0; }
    public function valid(): bool { return isset($this->data[$this->i]); }
}
foreach(new Serie(["a","b","c"]) as $k=>$v){ echo "$k:$v "; }</code></pre><h3>🧪 Ejercicio</h3>
`ListaTareas` iterable con `Iterator` y métodos `agregar()` y `listar()`.<p>---</p><h2>🧱 15. Principios SOLID</h2><p>| Letra | Principio | En una línea |
|---|---|---|
| **S** | Single Responsibility | Una clase = un motivo de cambio |
| **O** | Open/Closed | Extiende sin modificar |
| **L** | Liskov Substitution | Hijas sustituyen a la base sin sorpresas |
| **I** | Interface Segregation | Interfaces pequeñas y específicas |
| **D** | Dependency Inversion | Depende de **interfaces**, no de concreciones |</p><h3>Ejemplo corto de DI</h3>
<pre><code class='php'><?php
interface Notificador { public function enviar(string $msg): void; }
class Email implements Notificador { public function enviar(string $msg): void { echo "Email: $msg"; } }
class Servicio {
  public function __construct(private Notificador $n) {}
  public function run(){ $this->n->enviar("Hola"); }
}
$s = new Servicio(new Email()); $s->run();</code></pre><p>---</p><h2>🚧 16. Errores Comunes en OOP PHP</h2><p>- Usar `$this` dentro de métodos estáticos.  
- Exponer todo como `public` sin encapsular.  
- Heredar sin relación “es‑un(a)” (usa composición/traits).  
- No usar namespaces en proyectos medianos/grandes.  
- Falta de validaciones en constructores.  
- No escribir pruebas unitarias para clases con lógica crítica.</p><p>---</p><h2>🧠 17. Resumen Visual + Ejercicios Finales</h2><h3>Mapa conceptual</h3>
<pre><code class=''>CLASE → Molde
OBJETO → Instancia
PROPIEDADES → Datos
MÉTODOS → Acciones
ENCAPSULACIÓN → Oculta y protege
HERENCIA → Reutiliza
POLIMORFISMO → Misma interfaz, distinto comportamiento
ABSTRACCIÓN → Enfócate en lo esencial</code></pre><h3>Banco de ejercicios</h3>
1. **CuentaBancaria**: depósito, retiro, verSaldo (con validaciones).  
2. **Tienda**: `Producto` y `Carrito` (agregar, total, eliminar).  
3. **Figuras**: abstracta `Figura` + `Rectangulo`, `Circulo`, `Triangulo`.  
4. **Exportable**: interfaz con implementación JSON/XML.  
5. **Logger**: trait con alias y resolución de conflicto.  
6. **Conversor**: métodos estáticos y contador estático de conversiones.  
7. **Namespaces**: separa `Model`, `Controller` y `Service`.  
8. **Iterador**: `Paginador` que recorre páginas de resultados.<p>---</p><h2>🧩 18. Mini‑proyecto guiado: Gestor de Tareas OOP</h2><p>> Objetivo: aplicar todo el temario (clases, herencia, interfaces, traits, estáticos, namespaces e iteradores) en un mini‑proyecto funcional y fácil de ampliar.</p><h3>18.1 Estructura de carpetas (sugerida)</h3>
<pre><code class=''>src/
  Model/
    Tarea.php
    ColeccionTareas.php
  Service/
    Persistencia.php
  Util/
    Logger.php
index.php</code></pre><h3>18.2 Código</h3><p>**`src/Util/Logger.php` (trait)**
<pre><code class='php'><?php
namespace App\Util;
trait Logger {
    protected function log(string $msg): void {
        echo "[LOG] " . date('H:i:s') . " - $msg\n";
    }
}</code></pre></p><p>**`src/Model/Tarea.php`**
<pre><code class='php'><?php
namespace App\Model;</p><p>interface Exportable { public function exportar(): array; }</p><p>class Tarea implements Exportable {
    public function __construct(
        private string $titulo,
        private bool $completada = false
    ) {
        if (trim($titulo) === '') {
            throw new \InvalidArgumentException("El título es obligatorio");
        }
    }
    public function completar(): void { $this->completada = true; }
    public function esCompletada(): bool { return $this->completada; }
    public function titulo(): string { return $this->titulo; }
    public function exportar(): array {
        return ['titulo'=>$this->titulo, 'completada'=>$this->completada];
    }
}</code></pre></p><p>**`src/Model/ColeccionTareas.php` (iterable)**
<pre><code class='php'><?php
namespace App\Model;</p><p>use Iterator;
use App\Util\Logger;</p><p>class ColeccionTareas implements Iterator {
    use Logger;</p><p>/** @var Tarea[] */
    private array $tareas = [];
    private int $i = 0;</p><p>public function agregar(Tarea $t): void {
        $this->tareas[] = $t;
        $this->log("Tarea agregada: ".$t->titulo());
    }
    public function current(): mixed { return $this->tareas[$this->i] ?? null; }
    public function key(): mixed { return $this->i; }
    public function next(): void { $this->i++; }
    public function rewind(): void { $this->i = 0; }
    public function valid(): bool { return isset($this->tareas[$this->i]); }
    public function total(): int { return count($this->tareas); }
}</code></pre></p><p>**`src/Service/Persistencia.php` (métodos estáticos)**
<pre><code class='php'><?php
namespace App\Service;</p><p>use App\Model\ColeccionTareas;</p><p>class Persistencia {
    public static function guardarJSON(ColeccionTareas $c, string $ruta): void {
        $data = [];
        foreach ($c as $t) { $data[] = $t->exportar(); }
        file_put_contents($ruta, json_encode($data, JSON_PRETTY_PRINT|JSON_UNESCAPED_UNICODE));
    }
}</code></pre></p><p>**`index.php`**
<pre><code class='php'><?php
require __DIR__.'/src/Util/Logger.php';
require __DIR__.'/src/Model/Tarea.php';
require __DIR__.'/src/Model/ColeccionTareas.php';
require __DIR__.'/src/Service/Persistencia.php';</p><p>use App\Model\Tarea;
use App\Model\ColeccionTareas;
use App\Service\Persistencia;</p><p>$t1 = new Tarea("Comprar leche");
$t2 = new Tarea("Enviar informe");
$t2->completar();</p><p>$lista = new ColeccionTareas();
$lista->agregar($t1);
$lista->agregar($t2);</p><p>foreach ($lista as $t) {
    echo ($t->esCompletada() ? "✅" : "⬜️") . " " . $t->titulo() . PHP_EOL;
}</p><p>Persistencia::guardarJSON($lista, __DIR__.'/tareas.json');
echo "Guardado en tareas.json";</code></pre></p><h3>18.3 Extensiones sugeridas</h3>
- Añadir `Repositorio` con interfaz + implementación en archivos o BD.  
- Validaciones avanzadas y excepciones personalizadas.  
- Comandos CLI (por ejemplo, marcar tareas por índice).<p>---</p><h2>✅ Cierre</h2>
Con esta guía puedes **aprender, practicar y enseñar** OOP en PHP desde cero hasta un nivel intermedio/avanzado, con una base sólida para frameworks modernos.
  </main>
</div>
<script>
// Generate TOC from headings h1..h3
(function() {
  const nav = document.querySelector('nav ul');
  if (!nav) return;
  const headings = document.querySelectorAll('main h1, main h2, main h3');
  headings.forEach(h => {
    if (!h.id) {
      h.id = h.textContent.trim().toLowerCase()
        .replace(/[^\w\s\-]/g, '')
        .replace(/\s+/g, '-');
    }
    const li = document.createElement('li');
    li.style.marginLeft = (h.tagName === 'H2' ? '8px' : h.tagName === 'H3' ? '16px' : '0');
    const a = document.createElement('a');
    a.href = '#' + h.id;
    a.textContent = h.textContent;
    li.appendChild(a);
    nav.appendChild(li);
  });
})();

// Add copy buttons to code blocks
(function() {
  document.querySelectorAll('pre code').forEach((code) => {
    const pre = code.parentElement;
    const btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.textContent = 'Copiar';
    btn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(code.textContent);
        btn.textContent = '¡Copiado!';
        btn.classList.add('copied');
        setTimeout(() => { btn.textContent = 'Copiar'; btn.classList.remove('copied'); }, 1500);
      } catch (e) {
        btn.textContent = 'Error';
        setTimeout(() => { btn.textContent = 'Copiar'; }, 1200);
      }
    });
    pre.appendChild(btn);
  });
})();
</script>
</body>
</html>
